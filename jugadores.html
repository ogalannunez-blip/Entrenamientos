<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Partido de Fútbol</title>
    <style>
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;background-color:#f4f7f6;color:#333;margin:0;padding:10px}.container{max-width:800px;margin:auto;background-color:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 15px rgba(0,0,0,.1)}h1,h2{text-align:center;color:#1a73e8}h1{font-size:1.8em}h2{border-bottom:2px solid #1a73e8;padding-bottom:10px;margin-top:30px}table{width:100%;border-collapse:collapse;margin-top:20px}th,td{padding:12px;text-align:left;border-bottom:1px solid #ddd}th{background-color:#f2f2f2}input[type=number]{width:60px;padding:5px;border:1px solid #ccc;border-radius:4px;text-align:center}.status-radio{display:flex;gap:10px;justify-content:flex-start}.resultado{padding:20px;margin-top:10px;border-radius:8px;text-align:center;color:#fff;transition:background-color .3s ease}.probabilidad{font-size:2.5em;font-weight:700;margin:0}.recomendacion{font-size:1.1em;font-weight:400;margin-top:10px}.resumen{font-size:.9em;font-weight:400;margin-top:15px;opacity:.9;border-top:1px solid rgba(255,255,255,.3);padding-top:10px}.verde{background-color:#28a745}.ambar{background-color:#ffc107;color:#333}.rojo{background-color:#dc3545}.setup-section{padding:20px;border:2px dashed #ccc;border-radius:8px;text-align:center}textarea{width:95%;height:200px;margin-top:10px;padding:10px;font-family:monospace}button{background-color:#1a73e8;color:#fff;padding:10px 20px;border:none;border-radius:5px;font-size:1em;cursor:pointer;margin-top:15px}button:hover{background-color:#1558b8}.reset-button{background-color:#dc3545;font-size:.8em;padding:5px 10px;float:right}.reset-button:hover{background-color:#b02a37}@media screen and (max-width:600px){body{padding:5px}.container{padding:15px}h1{font-size:1.5em}.probabilidad{font-size:2em}.recomendacion{font-size:1em}table,thead,tbody,th,td,tr{display:block}thead tr{position:absolute;top:-9999px;left:-9999px}tr{border:1px solid #ccc;margin-bottom:15px;border-radius:5px;padding:5px}td{border:none;border-bottom:1px solid #eee;position:relative;padding-left:50%;text-align:right}td:before{position:absolute;left:6px;width:45%;padding-right:10px;white-space:nowrap;text-align:left;font-weight:700}td:nth-of-type(1):before{content:"Nombre"}td:nth-of-type(2):before{content:"Estado"}td:nth-of-type(3):before{content:"Jugados"}td:nth-of-type(4):before{content:"Total"}td:nth-of-type(5):before{content:"Fiabilidad"}.status-radio{justify-content:flex-end}input[type=number]{width:70px}}
    </style>
</head>
<body>

<div class="container">
    <h1>⚽ Gestor de Partido</h1>

    <div id="setup-section" style="display: none;">
        <h2>Configuración Inicial</h2>
        <p>Pega aquí tu lista de jugadores en formato JSON para empezar.</p>
        <textarea id="json-input" placeholder="[&#10;  { &quot;nombre&quot;: &quot;Oliver&quot;, &quot;jugados&quot;: 0, &quot;total&quot;: 0 },&#10;  ...&#10;]"></textarea>
        <button id="save-button">Guardar y Empezar</button>
    </div>

    <div id="main-content" style="display:none;">
        <button id="reset-button" class="reset-button">Reiniciar Datos</button>
        <div id="resultado"></div>
        <h2>👥 Lista de Jugadores</h2>
        <table id="tabla-jugadores">
            <thead><tr><th>Nombre</th><th>Estado</th><th>Jugados</th><th>Total</th><th>Fiabilidad</th></tr></thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
// **PASO 2: PEGA AQUÍ TUS CREDENCIALES DE FIREBASE**
const firebaseConfig = {
  apiKey: "AIzaSyAeUfYINReyta5uNZd8sDCylju0nE7oy-A",
  authDomain: "entrenamientos-5f314.firebaseapp.com",
  databaseURL: "https://entrenamientos-5f314-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "entrenamientos-5f314",
  storageBucket: "entrenamientos-5f314.firebasestorage.app",
  messagingSenderId: "322454738753",
  appId: "G-SGS7EYBFTZ"
};

// **PASO 3: INICIALIZAR FIREBASE**
firebase.initializeApp(firebaseConfig);
const database = firebase.database();
const dbRef = database.ref('jugadores');

document.addEventListener('DOMContentLoaded', function() {
    
    const setupSection = document.getElementById('setup-section');
    const mainContent = document.getElementById('main-content');
    const tablaBody = document.querySelector("#tabla-jugadores tbody");

    // Escuchar cambios en la base de datos en tiempo real
    dbRef.on('value', (snapshot) => {
        const jugadores = snapshot.val();
        if (jugadores) {
            iniciarApp(jugadores);
